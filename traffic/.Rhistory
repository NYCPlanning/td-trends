x=df[['Year']],
y=df[['PANYNJ']],
showlegend=F,
hovertext=paste0('<b>Year: </b>',df[['Year']]),
hoverinfo='text')
p=plot_ly()
p=p %>%
add_trace(type='scatter',
mode='none',
x=df[['Year']],
y=df[['PANYNJ']],
showlegend=F,
hovertext=paste0('<b>Year: </b>',df[['Year']]),
hoverinfo='text')
p=p %>%
add_trace(name='PANYNJ Inbound',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['PANYNJ']],
line=list(color=dfcolors['PANYNJ'],
width=2),
marker=list(color=dfcolors['PANYNJ'],
size=6),
showlegend=T,
hovertext=paste0('<b>',i,': </b>',format(df[[i]],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
add_trace(name='MTA',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['MTA']],
line=list(color=dfcolors['MTA'],
width=2),
marker=list(color=dfcolors['MTA'],
size=6),
showlegend=T,
hovertext=paste0('<b>',i,': </b>',format(df[[i]],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
layout(template='plotly_white',
title=list(text=paste0('<b>PANYNJ Monthly Inbound Crossings</b>'),
font=list(size=20),
x=0.5,
xanchor='center',
y=0.95,
yanchor='top'),
legend=list(orientation='h',
title=list(text=''),
font=list(size=16),
x=0.5,
xanchor='center',
y=1,
yanchor='bottom'),
margin=list(b=120,
l=80,
r=80,
t=120),
xaxis=list(title=list(text='<b>Month</b>',
font=list(size=14)),
tickfont=list(size=12),
tickformat='%b %Y',
dtick='M6',
range=c(min(df[['Date']])-15,max(df[['Date']])+15),
fixedrange=T,
showgrid=F),
yaxis=list(title=list(text='<b>Number of Automobiles</b>',
font=list(size=14)),
tickfont=list(size=12),
rangemode='tozero',
fixedrange=T,
showgrid=T,
zeroline=T,
zerolinecolor='rgba(0,0,0,0.2)',
zerolinewidth=2),
hoverlabel=list(font=list(size=14)),
font=list(family='Arial',
color='black'),
dragmode=F,
hovermode='x unified')
dfcolors=c('PANYNJ'='rgba(255,158,74,0.8)',
'MTA'='rgba(103,191,92,0.8)')
p=plot_ly()
p=p %>%
add_trace(type='scatter',
mode='none',
x=df[['Year']],
y=df[['PANYNJ']],
showlegend=F,
hovertext=paste0('<b>Year: </b>',df[['Year']]),
hoverinfo='text')
p=p %>%
add_trace(name='PANYNJ Inbound',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['PANYNJ']],
line=list(color=dfcolors['PANYNJ'],
width=2),
marker=list(color=dfcolors['PANYNJ'],
size=6),
showlegend=T,
hovertext=paste0('<b>',i,': </b>',format(df[[i]],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
add_trace(name='MTA',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['MTA']],
line=list(color=dfcolors['MTA'],
width=2),
marker=list(color=dfcolors['MTA'],
size=6),
showlegend=T,
hovertext=paste0('<b>',i,': </b>',format(df[[i]],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
layout(template='plotly_white',
title=list(text=paste0('<b>Annual Bridges and Tunnels Traffic Volume</b>'),
font=list(size=20),
x=0.5,
xanchor='center',
y=0.95,
yanchor='top'),
legend=list(orientation='h',
title=list(text=''),
font=list(size=16),
x=0.5,
xanchor='center',
y=1,
yanchor='bottom'),
margin=list(b=120,
l=80,
r=40,
t=120),
xaxis=list(title=list(text='<b>Year</b>',
font=list(size=14)),
tickfont=list(size=12),
range=c(min(df[['Year']])-0.5,max(df[['Year']])+0.5),
fixedrange=T,
showgrid=F),
yaxis=list(title=list(text='<b>Vehicles</b>',
font=list(size=14)),
tickfont=list(size=12),
rangemode='tozero',
fixedrange=T,
showgrid=T,
zeroline=T,
zerolinecolor='rgba(0,0,0,0.2)',
zerolinewidth=2),
hoverlabel=list(font=list(size=14)),
font=list(family='Arial',
color='black'),
dragmode=F,
hovermode='x unified')
p
i
p=plot_ly()
p=p %>%
add_trace(type='scatter',
mode='none',
x=df[['Year']],
y=df[['PANYNJ']],
showlegend=F,
hovertext=paste0('<b>Year: </b>',df[['Year']]),
hoverinfo='text')
p=p %>%
add_trace(name='PANYNJ Inbound',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['PANYNJ']],
line=list(color=dfcolors['PANYNJ'],
width=2),
marker=list(color=dfcolors['PANYNJ'],
size=6),
showlegend=T,
hovertext=paste0('<b>PANYNJ Inbound: </b>',format(df[['PANYNJ']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
add_trace(name='MTA',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['MTA']],
line=list(color=dfcolors['MTA'],
width=2),
marker=list(color=dfcolors['MTA'],
size=6),
showlegend=T,
hovertext=paste0('<b>MTA: </b>',format(df[['MTA']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
layout(template='plotly_white',
title=list(text=paste0('<b>Annual Bridges and Tunnels Traffic Volume</b>'),
font=list(size=20),
x=0.5,
xanchor='center',
y=0.95,
yanchor='top'),
legend=list(orientation='h',
title=list(text=''),
font=list(size=16),
x=0.5,
xanchor='center',
y=1,
yanchor='bottom'),
margin=list(b=120,
l=80,
r=40,
t=120),
xaxis=list(title=list(text='<b>Year</b>',
font=list(size=14)),
tickfont=list(size=12),
range=c(min(df[['Year']])-0.5,max(df[['Year']])+0.5),
fixedrange=T,
showgrid=F),
yaxis=list(title=list(text='<b>Vehicles</b>',
font=list(size=14)),
tickfont=list(size=12),
rangemode='tozero',
fixedrange=T,
showgrid=T,
zeroline=T,
zerolinecolor='rgba(0,0,0,0.2)',
zerolinewidth=2),
hoverlabel=list(font=list(size=14)),
font=list(family='Arial',
color='black'),
dragmode=F,
hovermode='x unified')
p=p %>%
add_annotations(text='Data Source: <a href="https://www.panynj.gov/bridges-tunnels/en/traffic---volume-information---b-t.html" target="blank">PANYNJ</a> | <a href="https://raw.githubusercontent.com/NYCPlanning/td-trends/main/traffic/PANYNJ Bridges&Tunnels Inbound.csv" target="blank">Download Chart Data</a>',
font=list(size=14),
showarrow=F,
x=1,
xanchor='right',
xref='paper',
y=0,
yanchor='top',
yref='paper',
yshift=-80)
p=p %>%
config(displayModeBar=F)
p
dfcolors=c('MTA'='rgba(114,158,206,0.8)',
'PANYNJ'='rgba(109,204,218,0.8)')
p=plot_ly()
p=p %>%
add_trace(type='scatter',
mode='none',
x=df[['Year']],
y=df[['PANYNJ']],
showlegend=F,
hovertext=paste0('<b>Year: </b>',df[['Year']]),
hoverinfo='text')
p=p %>%
add_trace(name='MTA Bridges & Tunnels',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['MTA']],
line=list(color=dfcolors['MTA'],
width=2),
marker=list(color=dfcolors['MTA'],
size=6),
showlegend=T,
hovertext=paste0('<b>MTA: </b>',format(df[['MTA']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
add_trace(name='PANYNJ Bridges & Tunnels Inbound Only',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['PANYNJ']],
line=list(color=dfcolors['PANYNJ'],
width=2),
marker=list(color=dfcolors['PANYNJ'],
size=6),
showlegend=T,
hovertext=paste0('<b>PANYNJ Inbound: </b>',format(df[['PANYNJ']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
layout(template='plotly_white',
title=list(text=paste0('<b>Annual Bridges and Tunnels Traffic Volume</b>'),
font=list(size=20),
x=0.5,
xanchor='center',
y=0.95,
yanchor='top'),
legend=list(orientation='h',
title=list(text=''),
font=list(size=16),
x=0.5,
xanchor='center',
y=1,
yanchor='bottom'),
margin=list(b=120,
l=80,
r=40,
t=120),
xaxis=list(title=list(text='<b>Year</b>',
font=list(size=14)),
tickfont=list(size=12),
range=c(min(df[['Year']])-0.5,max(df[['Year']])+0.5),
fixedrange=T,
showgrid=F),
yaxis=list(title=list(text='<b>Vehicles</b>',
font=list(size=14)),
tickfont=list(size=12),
rangemode='tozero',
fixedrange=T,
showgrid=T,
zeroline=T,
zerolinecolor='rgba(0,0,0,0.2)',
zerolinewidth=2),
hoverlabel=list(font=list(size=14)),
font=list(family='Arial',
color='black'),
dragmode=F,
hovermode='x unified')
p=p %>%
add_annotations(text='Data Source: <a href="https://www.panynj.gov/bridges-tunnels/en/traffic---volume-information---b-t.html" target="blank">PANYNJ</a> | <a href="https://raw.githubusercontent.com/NYCPlanning/td-trends/main/traffic/PANYNJ Bridges&Tunnels Inbound.csv" target="blank">Download Chart Data</a>',
font=list(size=14),
showarrow=F,
x=1,
xanchor='right',
xref='paper',
y=0,
yanchor='top',
yref='paper',
yshift=-80)
p=p %>%
config(displayModeBar=F)
p
dfcolors=c('MTA'='rgba(173,139,201,0.8)',
'PANYNJ'='rgba(109,204,218,0.8)')
p=plot_ly()
p=p %>%
add_trace(type='scatter',
mode='none',
x=df[['Year']],
y=df[['PANYNJ']],
showlegend=F,
hovertext=paste0('<b>Year: </b>',df[['Year']]),
hoverinfo='text')
p=p %>%
add_trace(name='MTA Bridges & Tunnels',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['MTA']],
line=list(color=dfcolors['MTA'],
width=2),
marker=list(color=dfcolors['MTA'],
size=6),
showlegend=T,
hovertext=paste0('<b>MTA: </b>',format(df[['MTA']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
add_trace(name='PANYNJ Bridges & Tunnels Inbound Only',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['PANYNJ']],
line=list(color=dfcolors['PANYNJ'],
width=2),
marker=list(color=dfcolors['PANYNJ'],
size=6),
showlegend=T,
hovertext=paste0('<b>PANYNJ Inbound: </b>',format(df[['PANYNJ']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
layout(template='plotly_white',
title=list(text=paste0('<b>Annual Bridges and Tunnels Traffic Volume</b>'),
font=list(size=20),
x=0.5,
xanchor='center',
y=0.95,
yanchor='top'),
legend=list(orientation='h',
title=list(text=''),
font=list(size=16),
x=0.5,
xanchor='center',
y=1,
yanchor='bottom'),
margin=list(b=120,
l=80,
r=40,
t=120),
xaxis=list(title=list(text='<b>Year</b>',
font=list(size=14)),
tickfont=list(size=12),
range=c(min(df[['Year']])-0.5,max(df[['Year']])+0.5),
fixedrange=T,
showgrid=F),
yaxis=list(title=list(text='<b>Vehicles</b>',
font=list(size=14)),
tickfont=list(size=12),
rangemode='tozero',
fixedrange=T,
showgrid=T,
zeroline=T,
zerolinecolor='rgba(0,0,0,0.2)',
zerolinewidth=2),
hoverlabel=list(font=list(size=14)),
font=list(family='Arial',
color='black'),
dragmode=F,
hovermode='x unified')
p=p %>%
add_annotations(text='Data Source: <a href="https://www.panynj.gov/bridges-tunnels/en/traffic---volume-information---b-t.html" target="blank">PANYNJ</a> | <a href="https://raw.githubusercontent.com/NYCPlanning/td-trends/main/traffic/PANYNJ Bridges&Tunnels Inbound.csv" target="blank">Download Chart Data</a>',
font=list(size=14),
showarrow=F,
x=1,
xanchor='right',
xref='paper',
y=0,
yanchor='top',
yref='paper',
yshift=-80)
p=p %>%
config(displayModeBar=F)
p
library(tidyverse)
library(plotly)
# path='C:/Users/Y_Ma2/Desktop/GITHUB/td-trends/'
path='C:/Users/mayij/Desktop/DOC/GITHUB/td-trends/'
df=read.csv(paste0(path,'traffic/AnnualBTTraffic.csv'),stringsAsFactors=F,check.names=F)
dfcolors=c('MTA'='rgba(173,139,201,0.8)',
'PANYNJ'='rgba(109,204,218,0.8)')
p=plot_ly()
p=p %>%
add_trace(type='scatter',
mode='none',
x=df[['Year']],
y=df[['PANYNJ']],
showlegend=F,
hovertext=paste0('<b>Year: </b>',df[['Year']]),
hoverinfo='text')
p=p %>%
add_trace(name='MTA Bridges & Tunnels',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['MTA']],
line=list(color=dfcolors['MTA'],
width=2),
marker=list(color=dfcolors['MTA'],
size=6),
showlegend=T,
hovertext=paste0('<b>MTA: </b>',format(df[['MTA']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
add_trace(name='PANYNJ Bridges & Tunnels Inbound Only',
type='scatter',
mode='lines+markers',
x=df[['Year']],
y=df[['PANYNJ']],
line=list(color=dfcolors['PANYNJ'],
width=2),
marker=list(color=dfcolors['PANYNJ'],
size=6),
showlegend=T,
hovertext=paste0('<b>PANYNJ Inbound: </b>',format(df[['PANYNJ']],trim=T,big.mark=',')),
hoverinfo='text')
p=p %>%
layout(template='plotly_white',
title=list(text=paste0('<b>Annual Bridges and Tunnels Traffic Volume</b>'),
font=list(size=20),
x=0.5,
xanchor='center',
y=0.95,
yanchor='top'),
legend=list(orientation='h',
title=list(text=''),
font=list(size=16),
x=0.5,
xanchor='center',
y=1,
yanchor='bottom'),
margin=list(b=120,
l=80,
r=40,
t=120),
xaxis=list(title=list(text='<b>Year</b>',
font=list(size=14)),
tickfont=list(size=12),
range=c(min(df[['Year']])-0.5,max(df[['Year']])+0.5),
fixedrange=T,
showgrid=F),
yaxis=list(title=list(text='<b>Vehicles</b>',
font=list(size=14)),
tickfont=list(size=12),
rangemode='tozero',
fixedrange=T,
showgrid=T,
zeroline=T,
zerolinecolor='rgba(0,0,0,0.2)',
zerolinewidth=2),
hoverlabel=list(font=list(size=14)),
font=list(family='Arial',
color='black'),
dragmode=F,
hovermode='x unified')
source('C:/Users/mayij/Desktop/DOC/GITHUB/td-trends/traffic/AnnualBTTraffic.R', echo=TRUE)
source('C:/Users/mayij/Desktop/DOC/GITHUB/td-trends/traffic/CBDMNTraffic.R', echo=TRUE)
source('C:/Users/mayij/Desktop/DOC/GITHUB/td-trends/traffic/CBDMNTraffic.R', echo=TRUE)
source('C:/Users/mayij/Desktop/DOC/GITHUB/td-trends/traffic/CBDMNTraffic.R', echo=TRUE)
